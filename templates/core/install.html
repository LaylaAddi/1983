{% extends 'base.html' %}

{% block title %}Install App - Section 1983 Document Generator{% endblock %}

{% block extra_css %}
<style>
    .install-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 3rem 0;
        margin-bottom: 2rem;
        border-radius: 1rem;
    }

    .install-step {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    [data-bs-theme="dark"] .install-step {
        background: #2d3436;
        border-color: #495057;
    }

    .step-number {
        width: 50px;
        height: 50px;
        background: #007bff;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
    }

    .platform-tabs {
        margin-bottom: 2rem;
    }

    .platform-tab {
        padding: 1rem 2rem;
        background: #f8f9fa;
        border: 2px solid #dee2e6;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.3s;
        margin: 0 0.5rem;
    }

    .platform-tab:hover {
        background: #e9ecef;
    }

    .platform-tab.active {
        background: #007bff;
        color: white;
        border-color: #007bff;
    }

    [data-bs-theme="dark"] .platform-tab {
        background: #343a40;
        border-color: #495057;
    }

    [data-bs-theme="dark"] .platform-tab:hover {
        background: #495057;
    }

    .platform-content {
        display: none;
    }

    .platform-content.active {
        display: block;
    }

    .screenshot-placeholder {
        background: #f8f9fa;
        border: 2px dashed #dee2e6;
        border-radius: 0.5rem;
        padding: 3rem;
        text-align: center;
        color: #6c757d;
        margin: 1rem 0;
    }

    [data-bs-theme="dark"] .screenshot-placeholder {
        background: #343a40;
        border-color: #495057;
    }

    .feature-list {
        list-style: none;
        padding: 0;
    }

    .feature-list li {
        padding: 0.5rem 0;
        padding-left: 2rem;
        position: relative;
    }

    .feature-list li:before {
        content: "✓";
        position: absolute;
        left: 0;
        color: #28a745;
        font-weight: bold;
        font-size: 1.2rem;
    }

    .share-link {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
        padding: 1rem;
        font-family: monospace;
        font-size: 1.1rem;
        word-break: break-all;
    }

    [data-bs-theme="dark"] .share-link {
        background: #343a40;
        border-color: #495057;
    }

    .copy-button {
        margin-top: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="install-hero text-center">
        <h1 class="mb-3"><i class="bi bi-phone"></i> Install Section 1983 App</h1>
        <p class="lead mb-0">Add our app to your phone's home screen for quick access</p>
    </div>

    <!-- Platform Selection -->
    <div class="text-center platform-tabs">
        <button class="platform-tab active" onclick="showPlatform('ios')">
            <i class="bi bi-apple"></i> iPhone / iPad
        </button>
        <button class="platform-tab" onclick="showPlatform('android')">
            <i class="bi bi-android2"></i> Android
        </button>
    </div>

    <!-- iOS Instructions -->
    <div id="ios-content" class="platform-content active">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i> <strong>Important:</strong> You must use Safari browser on iOS to install this app.
                </div>

                <!-- Step 1 -->
                <div class="install-step">
                    <div class="step-number">1</div>
                    <h4>Open Safari and Visit Our Website</h4>
                    <p>Open <strong>Safari</strong> (not Chrome) on your iPhone or iPad and go to:</p>
                    <div class="share-link">
                        https://www.1983ls.com
                    </div>
                    <button class="btn btn-primary copy-button" onclick="copyToClipboard('https://www.1983ls.com')">
                        <i class="bi bi-clipboard"></i> Copy Link
                    </button>
                </div>

                <!-- Step 2 -->
                <div class="install-step">
                    <div class="step-number">2</div>
                    <h4>Tap the Share Button</h4>
                    <p>Tap the <strong>Share button</strong> at the bottom of Safari (square with arrow pointing up)</p>
                    <div class="screenshot-placeholder">
                        <i class="bi bi-share" style="font-size: 3rem;"></i>
                        <p class="mt-2 mb-0">Look for this icon at the bottom of your screen</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="install-step">
                    <div class="step-number">3</div>
                    <h4>Select "Add to Home Screen"</h4>
                    <p>Scroll down in the share menu and tap <strong>"Add to Home Screen"</strong></p>
                    <div class="screenshot-placeholder">
                        <i class="bi bi-plus-square" style="font-size: 3rem;"></i>
                        <p class="mt-2 mb-0">It might be in the second row of options</p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="install-step">
                    <div class="step-number">4</div>
                    <h4>Confirm Installation</h4>
                    <p>You'll see a preview of the app icon. Tap <strong>"Add"</strong> in the top right corner.</p>
                    <p class="text-muted">The app name will be "1983 Generator"</p>
                </div>

                <!-- Step 5 -->
                <div class="install-step">
                    <div class="step-number">5</div>
                    <h4>Open the App!</h4>
                    <p>Find the app icon on your home screen and tap it to open.</p>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i> The app will now open in fullscreen mode, just like a native app!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Android Instructions -->
    <div id="android-content" class="platform-content">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i> <strong>Tip:</strong> Chrome browser works best for Android. Firefox and Edge also support PWA installation.
                </div>

                <!-- Step 1 -->
                <div class="install-step">
                    <div class="step-number">1</div>
                    <h4>Open Chrome and Visit Our Website</h4>
                    <p>Open <strong>Chrome</strong> on your Android phone and go to:</p>
                    <div class="share-link">
                        https://www.1983ls.com
                    </div>
                    <button class="btn btn-primary copy-button" onclick="copyToClipboard('https://www.1983ls.com')">
                        <i class="bi bi-clipboard"></i> Copy Link
                    </button>
                </div>

                <!-- Step 2 -->
                <div class="install-step">
                    <div class="step-number">2</div>
                    <h4>Look for the Install Banner</h4>
                    <p>You may see a banner at the bottom of the screen saying <strong>"Add 1983 Generator to Home screen"</strong></p>
                    <div class="screenshot-placeholder">
                        <i class="bi bi-download" style="font-size: 3rem;"></i>
                        <p class="mt-2 mb-0">If you see this, tap "Install" and skip to Step 5!</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="install-step">
                    <div class="step-number">3</div>
                    <h4>Or Use the Menu</h4>
                    <p>If you don't see a banner, tap the <strong>menu button</strong> (three dots ⋮) in the top right corner of Chrome.</p>
                    <div class="screenshot-placeholder">
                        <i class="bi bi-three-dots-vertical" style="font-size: 3rem;"></i>
                        <p class="mt-2 mb-0">Tap the three dots menu</p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="install-step">
                    <div class="step-number">4</div>
                    <h4>Select "Add to Home screen" or "Install app"</h4>
                    <p>In the menu, look for:</p>
                    <ul>
                        <li><strong>"Install app"</strong> (newer Android versions)</li>
                        <li><strong>"Add to Home screen"</strong> (older versions)</li>
                    </ul>
                    <p>Tap this option.</p>
                </div>

                <!-- Step 5 -->
                <div class="install-step">
                    <div class="step-number">5</div>
                    <h4>Confirm Installation</h4>
                    <p>A dialog will appear asking you to confirm. Tap <strong>"Install"</strong> or <strong>"Add"</strong>.</p>
                    <p class="text-muted">The app will be named "1983 Generator"</p>
                </div>

                <!-- Step 6 -->
                <div class="install-step">
                    <div class="step-number">6</div>
                    <h4>Open the App!</h4>
                    <p>Find the app icon on your home screen or app drawer and tap it to open.</p>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i> The app will now open in fullscreen mode with a bottom navigation bar!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Benefits Section -->
    <div class="row justify-content-center mt-5">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><i class="bi bi-star-fill"></i> Why Install the App?</h4>
                </div>
                <div class="card-body">
                    <ul class="feature-list">
                        <li><strong>Faster Access:</strong> Launch directly from your home screen</li>
                        <li><strong>Fullscreen Mode:</strong> More screen space without browser UI</li>
                        <li><strong>Offline Support:</strong> View cached documents without internet</li>
                        <li><strong>Native Feel:</strong> Works just like a real mobile app</li>
                        <li><strong>Always Updated:</strong> Automatically gets the latest features</li>
                        <li><strong>No App Store:</strong> Install directly, no downloads needed</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Troubleshooting -->
    <div class="row justify-content-center mt-4 mb-5">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0"><i class="bi bi-question-circle"></i> Troubleshooting</h4>
                </div>
                <div class="card-body">
                    <h6>Don't see "Add to Home Screen" option?</h6>
                    <ul>
                        <li><strong>iPhone:</strong> Make sure you're using Safari, not Chrome</li>
                        <li><strong>Android:</strong> Make sure you're using Chrome browser</li>
                        <li>Try closing and reopening the browser</li>
                        <li>Make sure you're visiting <code>https://www.1983ls.com</code></li>
                    </ul>

                    <h6 class="mt-3">App opens in browser instead of fullscreen?</h6>
                    <ul>
                        <li>Remove the app from home screen and try installing again</li>
                        <li>Clear your browser cache first</li>
                        <li>Make sure you're tapping the icon that was added, not a bookmark</li>
                    </ul>

                    <h6 class="mt-3">Need help?</h6>
                    <p class="mb-0">Contact us at <a href="mailto:info@1983ls.com">info@1983ls.com</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Section -->
    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="alert alert-light border">
                <h5><i class="bi bi-share"></i> Share This Page</h5>
                <p>Send this installation guide to others:</p>
                <div class="share-link mb-2">
                    https://www.1983ls.com/install
                </div>
                <button class="btn btn-outline-primary" onclick="copyToClipboard('https://www.1983ls.com/install')">
                    <i class="bi bi-clipboard"></i> Copy Installation Link
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function showPlatform(platform) {
    // Hide all platform content
    document.querySelectorAll('.platform-content').forEach(content => {
        content.classList.remove('active');
    });

    // Remove active class from all tabs
    document.querySelectorAll('.platform-tab').forEach(tab => {
        tab.classList.remove('active');
    });

    // Show selected platform
    document.getElementById(platform + '-content').classList.add('active');

    // Highlight selected tab
    event.target.closest('.platform-tab').classList.add('active');
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        // Show success message
        const button = event.target.closest('button');
        const originalHTML = button.innerHTML;
        button.innerHTML = '<i class="bi bi-check"></i> Copied!';
        button.classList.add('btn-success');
        button.classList.remove('btn-primary', 'btn-outline-primary');

        setTimeout(() => {
            button.innerHTML = originalHTML;
            button.classList.remove('btn-success');
            button.classList.add(button.classList.contains('copy-button') ? 'btn-primary' : 'btn-outline-primary');
        }, 2000);
    }).catch(err => {
        alert('Could not copy: ' + err);
    });
}

// Auto-detect platform and show appropriate instructions
document.addEventListener('DOMContentLoaded', () => {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera;

    // Check if iOS
    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        showPlatform('ios');
        document.querySelector('.platform-tab').classList.remove('active');
        document.querySelectorAll('.platform-tab')[0].classList.add('active');
    }
    // Check if Android
    else if (/android/i.test(userAgent)) {
        showPlatform('android');
        document.querySelector('.platform-tab').classList.remove('active');
        document.querySelectorAll('.platform-tab')[1].classList.add('active');
    }
});
</script>
{% endblock %}
